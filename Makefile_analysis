DSELECTOR_MACROS = call_DSelector2.C DSelector_Z2pi0_trees2.C DSelector_Z2pi0_trees2.h
DSELECTOR_OUTPUTS = DSelector_Z2pi0_trees2.root tree_DSelector_Z2pi0_trees.root treeFlat_DSelector_Z2pi0_trees.root

PLOT_MACROS = plot_Z2pi_trees.C
PLOT_INPUTS = DSelector_Z2pi0_trees.root treeFlat_DSelector_Z2pi0_trees.root

FLAT_MACROS = call_MakeAmpToolsFlat_pi0.C MakeAmpToolsFlat_pi0.C MakeAmpToolsFlat_pi0.h
all: fit

tree_pi0pi0misspb208.root: /work/halld/home/marki/npp_output/root/trees/tree_pi0pi0misspb208__B2_gen_2pi0_primakoff_nppmmi_030300_000.root
	rm -fv $@
	hadd $@ $<

%.C: $(NPP)/root_macros/%.C
	cp -v $< $@

%.h: $(NPP)/root_macros/%.h
	cp -v $< $@

$(DSELECTOR_OUTPUTS): tree_pi0pi0misspb208.root $(DSELECTOR_MACROS)
	root -b -q tree_pi0pi0misspb208.root 'call_DSelector2.C("DSelector_Z2pi0_trees2.C")'

DSelector_Z2pi0_trees.root: DSelector_Z2pi0_trees2.root
	cp -v DSelector_Z2pi0_trees2.root DSelector_Z2pi0_trees.root

plots: $(PLOT_MACROS) $(PLOT_INPUTS)
	root -b -q  plot_Z2pi_trees.C\(\"DSelector_Z2pi0_trees\"\)

AmpToolsInputTreeInTime.root: treeFlat_DSelector_Z2pi0_trees.root $(FLAT_MACROS)
	root -b -q treeFlat_DSelector_Z2pi0_trees.root 'call_MakeAmpToolsFlat_pi0.C(2)'

treeFlat_DSelector_Z2pi0_trees_flat_amptools.root: AmpToolsInputTreeInTime.root
	cp -v AmpToolsInputTreeInTime.root treeFlat_DSelector_Z2pi0_trees_flat_amptools.root

fit: $(NPP)/amptools/fit_2pi0_primakoff.cfg treeFlat_DSelector_Z2pi0_trees_flat_amptools.root
	fit -c $(NPP)/amptools/fit_2pi0_primakoff.cfg

clean:
	rm -fv *.pcm *.d *.so *.pdf tree_pi0pi0misspb208.root $(DSELECTOR_MACROS) $(DSELECTOR_OUTPUTS) $(PLOT_MACROS) $(PLOT_INPUTS) $(PLOT_OUTPUTS) $(FLAT_MACROS) AmpToolsInputTreeInTime.root
